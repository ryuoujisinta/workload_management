# 画面テスト仕様書

この文書では、工数管理アプリの画面遷移とフォーム処理を検証するテスト項目をまとめます。現状は Flask テストクライアントによるルートテストを軸としていますが、ブラウザ操作を自動化するため Selenium を用いたテストも実施します。

## テスト環境
- Python 3.11
- Flask 3.1
- pytest 8 系
- Selenium 4 (ChromeDriver)
- テストデータは一時ディレクトリに保存

## テスト対象画面
| 画面 | URL |
| --- | --- |
| ログイン | `/` |
| ユーザー登録 | `/register` |
| タスク登録 | `/tasks` |
| 工数登録 | `/workloads` |

## 画面別テスト項目

### ログイン画面
1. **表示確認**  
   GET `/` を実行しステータス 200 かつページに「ログイン」の文字列が含まれること。
2. **ログイン処理**  
   ユーザー名とパスワードを送信した場合に `/workloads` へリダイレクトされること。

### ユーザー登録画面
1. **表示確認**  
   GET `/register` が 200 を返し、「ユーザー登録」が表示されること。
2. **登録処理**  
   フォーム送信後 `users.json` にユーザーが保存され、トップページへリダイレクトされること。

### タスク登録画面
1. **表示確認**  
   GET `/tasks` の結果が 200 で「タスク登録」が表示されること。
2. **登録処理**  
   POST で送信したタスクが `tasks.json` に保存されること。

### 工数登録画面
1. **表示確認**
   GET `/workloads` の結果が 200 で、7 日分の日付ヘッダーが表示されること。
2. **タスク表示**
   事前登録されたタスク名がテーブルに表示されること。
3. **POST 処理 (未実装)**
   実装後は入力値が所定のファイルに保存されることを確認する。

## Selenium を用いた E2E テスト

ブラウザ操作を自動化し、実際の画面遷移やフォーム入力を検証する。ChromeDriver に
よるヘッドレス実行を想定する。

1. **ログインから工数登録までの流れ**
   - ログイン画面でユーザー名とパスワードを入力し、`/workloads` へ遷移することを
     確認する。
2. **ユーザー登録ページへのリンク遷移**
   - ログイン画面の「新規登録」リンクをクリックすると `/register` が表示されること。
3. **入力エラーの表示**
   - ユーザー登録画面で必須項目を空のまま送信した場合、エラーメッセージが表示される
     ことを確認する。

## 今後の拡張・検討事項
- Chrome 以外のブラウザでも動作するよう WebDriver 周りの設定を拡充する。
- 権限チェックや入力バリデーションなど、異常系のテストケースを充実させる。
